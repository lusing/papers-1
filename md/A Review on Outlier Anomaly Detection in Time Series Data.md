# A Review on Outlier/Anomaly Detection in Time Series Data

Recent advances in technology have brought major breakthroughs in data collection, enabling a large amount of data to be gathered over time and thus generating time series. Mining this data has become an important task for researchers and practitioners in the past few years, including the detection of outliers or anomalies that may represent errors or events of interest. This review aims to provide a structured and comprehensive state-of-the-art on unsupervised outlier detection techniques in the context of time series. To this end, a taxonomy is presented based on the main aspects that characterize an outlier detection technique.

最近的技术进步为数据收集带来了重大突破，可以随着时间的推移收集大量数据，从而生成时间序列。 在过去几年中，挖掘这些数据已成为研究人员和从业人员的一项重要任务，包括检测可能代表感兴趣的错误或事件的异常值或异常值。 本综述旨在提供结构化和全面的时间序列背景下无监督异常值检测技术的最新技术。 为此，基于表征异常值检测技术的主要方面提出了分类法。

## 1 INTRODUCTION

Recent advances in technology allow us to collect a large amount of data over time in diverse
research areas. Observations that have been recorded in an orderly fashion and that are correlated
in time constitute a time series. Time series data mining aims to extract all meaningful knowledge from this data, and several mining tasks (e.g., classification, clustering, forecasting, and outlier
detection) have been considered in the literature [Ratanamahatana et al. 2010; Fu 2011; Esling and
Agon 2012].

- C. A. Ratanamahatana, J. Lin, D. Gunopulos, E. Keogh, M. Vlachos, and G. Das. 2010. Mining time series data. In Data Mining and Knowledge Discovery Handbook (2nd ed.), Oded Maimon and Lior Rokach (Eds.). Springer US, 1049–1077.


随着时间的推移，技术的进步使我们能够在不同的研究领域收集大量数据。 以有序方式记录并在时间上相关的观察结果构成了一个时间序列。 时间序列数据挖掘旨在从这些数据中提取所有有意义的知识，文献中已经考虑了几种挖掘任务（例如，分类、聚类、预测和异常值检测）[Ratanamahatana et al. 2010年； 傅 2011; 埃斯林和阿贡 2012]。

Outlier detection has become a field of interest for many researchers and practitioners and is now one of the main tasks of time series data mining. Outlier detection has been studied in a variety of application domains such as credit card fraud detection, intrusion detection in cybersecurity, or fault diagnosis in industry. In particular, the analysis of outliers in time series data examines anomalous behaviors across time [Gupta et al. 2014a]. In the first study on this topic, which was conducted by Fox [1972], two types of outliers in univariate time series were defined: type I, which affects a single observation; and type II, which affects both a particular observation and the subsequent observations. This work was first extended to four outlier types [Tsay 1988], and then to the case of multivariate time series [Tsay et al. 2000]. Since then, many definitions of the term outlier and numerous detection methods have been proposed in the literature. However, to this day, there is still no consensus on the terms used [Carreño et al. 2019]; for example, outlier observations are often referred to as anomalies, discordant observations, discords, exceptions, aberrations, surprises, peculiarities or contaminants.

异常值检测已成为许多研究人员和从业人员感兴趣的领域，现在是时间序列数据挖掘的主要任务之一。异常值检测已在各种应用领域进行了研究，例如信用卡欺诈检测、网络安全中的入侵检测或工业中的故障诊断。特别是，对时间序列数据中的异常值的分析检查了跨时间的异常行为 [Gupta 等人。 2014a]。在 Fox [1972] 进行的关于这个主题的第一项研究中，定义了单变量时间序列中的两种类型的异常值：I 型，它影响单个观察；和类型 II，它会影响特定的观察结果和随后的观察结果。这项工作首先扩展到四种异常值类型 [Tsay 1988]，然后扩展到多元时间序列的情况 [Tsay 等人。 2000]。从那时起，文献中提出了异常值一词的许多定义和许多检测方法。然而，直到今天，仍然没有就所使用的术语达成共识 [Carreño et al. 2019];例如，异常观察通常被称为异常、不一致的观察、不一致、异常、异常、意外、特性或污染物。

From a classical point of view, a widely used definition for the concept outlier has been provided by Hawkins [1980]: “An observation which deviates so much from other observations as to arouse suspicions that it was generated by a different mechanism.” Therefore, outliers can be thought of as observations that do not follow the expected behavior.

从经典的角度来看，Hawkins [1980] 为概念异常值提供了一个广泛使用的定义：“与其他观察结果相差太大以至于引起怀疑它是由不同机制产生的观察。” 因此，异常值可以被认为是不遵循预期行为的观察结果。

As shown in Figure 1, outliers in time series can have two different meanings, and the semantic distinction between them is mainly based on the interest of the analyst or the particular scenario considered. These observations have been related to noise, erroneous, or unwanted data, which by themselves are not interesting to the analyst [Aggarwal 2016]. In these cases, outliers should be deleted or corrected to improve the data quality and generate a cleaner dataset that can be used by other data mining algorithms. For example, sensor transmission errors are eliminated to obtain more accurate predictions, because the principal aim is tomake predictions. Nevertheless, in recent years and, especially in the area of time series data, many researchers have aimed to detect and analyze unusual but interesting phenomena. Fraud detection is an example of this, because the main objective is to detect and analyze the outlier itself. These observations are often referred to as anomalies [Aggarwal 2016].

如图 1 所示，时间序列中的异常值可以有两种不同的含义，它们之间的语义区分主要基于分析师的兴趣或所考虑的特定场景。这些观察结果与噪声、错误或不需要的数据有关，分析人员对这些数据本身并不感兴趣 [Aggarwal 2016]。在这些情况下，应删除或纠正异常值以提高数据质量并生成可供其他数据挖掘算法使用的更清晰的数据集。例如，消除传感器传输误差以获得更准确的预测，因为主要目的是进行预测。尽管如此，近年来，尤其是在时间序列数据领域，许多研究人员的目标是检测和分析不寻常但有趣的现象。欺诈检测就是一个例子，因为主要目标是检测和分析异常值本身。这些观察结果通常被称为异常 [Aggarwal 2016]。

The purpose of this review is to present a structured and comprehensive state-of-the-art on outlier detection techniques in time series data and attempt to extract the essence of the concept outlier, focusing on the detection algorithms given by different authors. Despite the broad terminology that is used to refer to outliers, this review focuses on the identification of outliers in the unsupervised framework, regardless of the term used in the original papers.

这篇综述的目的是提出结构化和全面的时间序列数据中异常值检测技术的最新技术，并尝试提取异常值概念的本质，重点关注不同作者给出的检测算法。 尽管使用广泛的术语来指代离群值，但本综述侧重于在无监督框架中识别离群值，而不管原始论文中使用的术语如何。

Although a number of surveys on outlier detection methods have been presented in the literature
[Hodge and Austin 2004; Chandola et al. 2007, 2009; Aguinis et al. 2013; Aggarwal 2016; Xu
et al. 2019], very few focus on temporal data, including time series [Gupta et al. 2014b].

尽管文献[Hodge and Austin 2004; 钱多拉等人。 2007、2009； 阿吉尼斯等人。 2013年； 阿加瓦尔 2016 年； 徐等人。 2019]，很少关注时间数据，包括时间序列 [Gupta et al. 2014b]。

In this sense, the main contributions of this article are fourfold:
- We give a comprehensive review that focuses only on time series data. Thus, we provide
an in-depth analysis, examining techniques that have hardly been explored in the literature
so far. To the best of our knowledge, none of the existing surveys focus exclusively on
unsupervised outlier detection in time series, and so, they do not provide enough details of
this specific problem and the methods published to solve it.
- We propose a novel taxonomy for outlier detection methods in time series data by extracting
the most relevant characteristics of the existing methodologies. This taxonomy provides a
global understanding of the outliers and their detection in time series, and helps to choose
the type of technique that best adapts to a given problem. We also provide details about
other features that characterize each technique. As far as we know, the existing surveys do
not propose a complete taxonomy and do not extract the characteristics of each method.
- We provide the publicly available software related to the analyzed methods. This is an important
point nowadays, since it allows us to reproduce the methods. The existing related
surveys do not present this information.
- We identify some future research directions on outlier detection in time series.

The rest of this article is organized as follows. In Section 1.1, the methodology followed in this
study is described. In Section 2, a taxonomy for the classification of outlier detection techniques
in time series data are proposed. Sections 3, 4, and 5 present different techniques used for point,
subsequence, and time series outlier detection, respectively. The techniques are classified according
to the taxonomy proposed in Section 2, and the intuition of the concept outlier on which the
methods are based is provided. In Section 6, the publicly available software for some of the considered
outlier detection methods is presented. Finally, Section 7 contains the concluding remarks
and outlines some areas for further research.

### 1.1 METHODOLOGY

This study has been oriented and organized with the intention to answer the following research questions: 
- (RQ1) What are the most important characteristics that define each outlier detection method? Based on this, how could the existing techniques be taxonomized? 
- (RQ2) How do existing techniques detect point, subsequence and time series outliers in time series data? Which are the main differences between these methods? 
- (RQ3) Are there publicly available software packages for outlier detection in time series? What type of methods do they implement?

本研究的方向和组织旨在回答以下研究问题：

- （RQ1）定义每种异常值检测方法的最重要特征是什么？ 基于此，如何对现有技术进行分类？
- （RQ2）现有技术如何检测时间序列数据中的点、子序列和时间序列异常值？ 这些方法之间的主要区别是什么？
- (RQ3) 是否有公开可用的用于时间序列异常值检测的软件包？ 他们实现什么类型的方法？

## 2 A TAXONOMY OF OUTLIER DETECTION TECHNIQUES IN THE TIME SERIES CONTEXT

## 3 POINT OUTLIERS

Point outlier detection is the most common outlier detection task in the area of time series. This section presents the techniques used to detect this type of outlier, in both univariate (Section 3.1) and multivariate (Section 3.2) time series data.

点离群点检测是时间序列领域最常见的离群点检测任务。 本节介绍用于在单变量（第 3.1 节）和多变量（第 3.2 节）时间序列数据中检测此类异常值的技术。

Specifically, as shown in Figure 6, two key characteristics of these methods will be highlighted throughout their presentation. Concerning the first characteristic, or the treatment of temporality, some methods consider the inherent temporal order of the observations, while others completely ignore this information. The main difference between the methods that include temporal information and those that do not is that the latter methods produce the same results, even if they are applied to a shuffled version of the series. Within the methods that use temporality, a subgroup of methods use time windows. Consequently, the same results are obtained when shuffling the observations within the window, but not when shuffling the whole time series.

具体来说，如图 6 所示，这些方法的两个关键特征将在整个演示过程中突出显示。 关于第一个特征，或对时间的处理，一些方法考虑了观察的固有时间顺序，而另一些方法则完全忽略了这些信息。 包含时间信息的方法与不包含时间信息的方法之间的主要区别在于，后一种方法产生相同的结果，即使它们应用于序列的混洗版本。 在使用时间性的方法中，有一部分方法使用时间窗。 因此，在对窗口内的观察进行混洗时会获得相同的结果，但在对整个时间序列进行混洗时则不会获得相同的结果。

In relation to the second characteristic (see Figure 6), some techniques are able to detect outliers in streaming time series by determining whether or not a new incoming datum is an outlier as soon as it arrives, without having to wait for more data. Within this group, some methods use a fixed model throughout the stream evolution, whereas others update themodels used for detection with the new information received—either by retraining the whole model or by learning in an incremental manner. We consider that a technique does not apply to a streaming time series (i.e., non-streaming) if it is unable to make a decision at the arrival of the new datum.

关于第二个特征（参见图 6），某些技术能够通过确定新传入数据一到达就确定其是否为异常值来检测流时间序列中的异常值，而无需等待更多数据。 在该组中，一些方法在整个流演化过程中使用固定模型，而另一些方法使用接收到的新信息更新用于检测的模型——通过重新训练整个模型或以增量方式学习。 如果无法在新数据到达时做出决定，我们认为该技术不适用于流式时间序列（即非流式）。

Most of the analyzed point outlier detection techniques can be applied in a streaming context and they take the temporality of the data into account, either by considering the full time series as an ordered sequence or with the use of time windows. Therefore, we will only make reference to this axis for methods that cannot be applied in a streaming environment or that completely ignore the temporal information in the data. Finally, even though many techniques can theoretically deal with streaming time series, very few are able to adapt incrementally to the evolution of the stream. Consequently, we will also highlight these techniques.

大多数分析的点异常值检测技术都可以应用于流上下文，并且它们通过将完整时间序列视为有序序列或使用时间窗口来考虑数据的时间性。 因此，对于不能在流环境中应用或完全忽略数据中的时间信息的方法，我们只会参考此轴。 最后，尽管许多技术理论上可以处理流式时间序列，但很少有人能够逐步适应流的演变。 因此，我们还将重点介绍这些技术。

### 3.1 Univariate Time Series

The techniques that will be discussed in this section intend to detect point outliers in a univariate time series and are organized based on the diagram shown in Figure 7. Since a single time dependent variable is considered, recall that these outliers are univariate points and that only univariate detection techniques can be used for their detection.

本节将讨论的技术旨在检测单变量时间序列中的点异常值，并根据图 7 中所示的图表进行组织。由于考虑了单个时间因变量，请记住这些异常值是单变量点，并且仅 单变量检测技术可用于它们的检测。

The most popular and intuitive definition for the concept of point outlier is a point that significantly deviates from its expected value. Therefore, given a univariate time series, a point at time t can be declared an outlier if the distance to its expected value is higher than a predefined threshold 
$
\tau : |x_t − \hat{x_t} | > \tau , (1)
$

where $x_t$ is the observed data point, and $\hat{x_t}$ is its expected value. This problem is graphically depicted in Figure 8, where the observed values within the shadowed area are at most at distance $\tau$ from their expected values.

The outlier detection methods based on the strategy described in Equation (1) are denominated model-based methods in this article and are the most common approaches in the literature. Even though each technique computes the expected value ˆ xt and the threshold τ differently, they are all based on fitting a model (either explicitly or implicitly). As shown in Table 1, if ˆ xt is obtained using previous and subsequent observations to xt (past, current, and future data), then the technique is within the estimation model-based methods. In contrast, if ˆ xt is obtained relying only on previous observations to xt (past data), then the technique is within the prediction model-based methods. In practice, the main difference between using estimation or prediction methods is that techniques within this latter category can be used in streaming time series, because they can determine whether or not a new datum is an outlier as soon as it arrives. In the case of estimation methods, this can only be done if, besides some points preceding xt , only the current point xt is used to compute the estimated value (k2 = 0).

基于等式（1）中描述的策略的异常值检测方法在本文中被称为基于模型的方法，并且是文献中最常见的方法。尽管每种技术计算期望值 ˆxt 和阈值 τ 的方式不同，但它们都基于拟合模型（显式或隐式）。如表 1 所示，如果 ˆxt 是使用对 xt（过去、当前和未来数据）的先前和后续观察获得的，则该技术属于基于估计模型的方法。相反，如果 ˆxt 仅依赖于先前对 xt（过去数据）的观察获得，则该技术属于基于预测模型的方法。在实践中，使用估计或预测方法的主要区别在于后一类技术可用于流式时间序列，因为它们可以在新数据到达时立即确定它是否为异常值。在估计方法的情况下，这只能在除了 xt 之前的一些点之外，只有当前点 xt 用于计算估计值 (k2 = 0) 时才能完成。

The most simple estimation models are based on constant or piecewise constant models, where
basic statistics such as the median [Basu and Meckesheimer 2007] or the Median Absolute Deviation
(MAD) [Mehrang et al. 2015] are used to obtain ˆ xt . These statistics are calculated using the
full series or by grouping the data in equal-length segments and cannot be applied in streaming
when future data are needed (k2 > 0). A more sophisticated approach is to utilize unequal-length
segments obtained with some segmentation technique. Dani et al. [2015] use themean of each segment
to determine the expected value of the points within that segment, and an adaptive threshold
τi = ασi, where α is a fixed value and σi the standard deviation of segment i.

最简单的估计模型基于常数或分段常数模型，其中基本统计数据如中值 [Basu 和 Meckesheimer 2007] 或中值绝对偏差 (MAD) [Mehrang 等人。 2015] 用于获得 ˆ xt 。 这些统计数据是使用完整系列或通过将数据分组为等长段来计算的，并且在需要未来数据 (k2 > 0) 时无法应用于流式传输。 更复杂的方法是利用通过某些分割技术获得的不等长段。 丹尼等人。 [2015] 使用每个段的平均值来确定该段内点的期望值，以及自适应阈值 τi = ασi，其中 α 是固定值，σi 是段 i 的标准偏差。

Other estimation-based techniques intend to identify data points that are unlikely if a certain fitted model or distribution is assumed to have generated the data. For instance, some authors model the structure of the data using smoothing methods such as B-splines or kernels [Chen et al. 2010; Holešovský et al. 2018; Čampulová et al. 2018] or variants of the Exponentially Weighted Moving Average (EWMA) method [Carter and Streilein 2012], Song et al. [2015] and Zhang et al. [2016] use slope constraints, Mehrang et al. [2015] assume that the data without outliers are approximately normal, and Reddy et al. [2017] use Gaussian Mixture Models (GMM).

如果假定某个拟合模型或分布已生成数据，则其他基于估计的技术旨在识别不太可能出现的数据点。 例如，一些作者使用平滑方法（如 B 样条或核）对数据结构进行建模 [Chen et al. 2010年； Holešovský 等人。 2018 年； Čampulová 等人。 2018] 或指数加权移动平均 (EWMA) 方法的变体 [Carter 和 Streilein 2012]，Song 等人。 [2015] 和张等人。 [2016] 使用斜率约束，Mehrang 等人。 [2015] 假设没有异常值的数据近似正常，Reddy 等人。 [2017] 使用高斯混合模型 (GMM)。

Once amodel or distribution is assumed and fitted, Chen et al. [2010], Carter and Streilein [2012], and Reddy et al. [2017] use Equation (1) directly to decide whether a point is an outlier or not. More elaborately, Holešovský et al. [2018] use extreme value theory to compute a confidence limit for the high values of the kernel smoothing residuals (|xt − ˆ xt |) and flag point outliers as those exceeding that limit. Within the estimation-methods that use slope constraints, Song et al. [2015] establish a maximum and a minimum possible slope between consecutive values, whereas Zhang et al. [2016] model the change in slopes before and after time t , assuming that the slopes should not change significantly at a time point. The Extreme Studentized Deviate (ESD) test has also been used to make the decision [Mehrang et al. 2015; Čampulová et al. 2018]: the null hypothesis considered is that there are no outliers, whereas the alternative is that there are up to k. Regardless of the temporal correlation, the algorithm computes k test statistics iteratively to detect k point outliers. At each iteration, it removes the most outlying observation (i.e., the furthest from the mean value). Finally, Čampulová et al. [2018] also propose defining the threshold in Equation (1) using Chebyshev’s inequality or the quantiles of normal distribution, after dividing the residuals from kernel regression into homogeneous segments using change point analysis.

一旦假设并拟合了模型或分布，Chen 等人。 [2010]、Carter 和 Streilein [2012] 以及 Reddy 等人。 [2017] 直接使用等式（1）来判断一个点是否为异常值。更详细地说，Holešovský 等人。 [2018] 使用极值理论计算内核平滑残差 (|xt − ˆ xt |) 的高值的置信限，并将点异常值标记为超出该限制的那些。在使用斜率约束的估计方法中，Song 等人。 [2015] 建立了连续值之间的最大和最小可能斜率，而 Zhang 等人。 [2016] 对时间 t 之前和之后的斜率变化进行建模，假设斜率在某个时间点不应显着变化。极端学生化偏差 (ESD) 测试也已用于做出决定 [Mehrang et al. 2015年； Čampulová 等人。 2018]：考虑的零假设是没有异常值，而替代方案是最多有 k 个。无论时间相关性如何，该算法都会迭代计算 k 个测试统计量以检测 k 个离群点。在每次迭代中，它删除最外围的观察（即，离平均值最远的）。最后，Čampulová 等人。 [2018] 还建议使用切比雪夫不等式或正态分布的分位数定义方程 (1) 中的阈值，之后使用变化点分析将来自核回归的残差划分为齐次段。

Some other univariate outlier detection methods analyze all of the residuals obtained from different models to identify the outliers. For example, Hochenbaum et al. [2017] use the STL decomposition, and Akouemo and Povinelli [2014, 2016, 2017] use ARIMA models with exogenous inputs, linear regression or Artificial Neural Networks (ANNs). Although most of these models can also be used in prediction, in this case, the outliers are detected in the residual set using past and future data. Specifically, once the selected model is learned, hypothesis testing is applied over the residuals to detect the outliers. In Hochenbaum et al. [2017], the ESD test is applied but using the median and MAD instead of the mean and standard deviation, for robustness. In Akouemo and Povinelli [2014, 2016, 2017], assuming that the underlying distribution of the residuals is known, the minimum and maximum values are examined simultaneously at each iteration of the algorithm. The hypothesis to be tested is whether an extremum is an outlier (alternative hypothesis) or not (null hypothesis). The detected outliers are corrected, and the process is repeated until no more outliers are detected.

其他一些单变量异常值检测方法分析从不同模型获得的所有残差以识别异常值。例如，Hochenbaum 等人。 [2017] 使用 STL 分解，Akouemo 和 Povinelli [2014, 2016, 2017] 使用具有外源输入、线性回归或人工神经网络 (ANN) 的 ARIMA 模型。尽管这些模型中的大多数也可用于预测，但在这种情况下，使用过去和未来数据在残差集中检测异常值。具体来说，一旦学习了选定的模型，就会对残差应用假设检验以检测异常值。在 Hochenbaum 等人中。 [2017]，为了稳健性，应用了 ESD 测试，但使用中位数和 MAD 而不是平均值和标准偏差。在 Akouemo 和 Povinelli [2014、2016、2017] 中，假设残差的潜在分布已知，则在算法的每次迭代中同时检查最小值和最大值。要测试的假设是极值是否是异常值（替代假设）或不是（零假设）。校正检测到的异常值，并重复该过程直到不再检测到异常值。

In contrast to estimation models, techniques based on prediction models fit a model to the time series and obtain ˆ xt using only past data; that is, without using the current point xt or any posterior observations. Points that are very different from their predicted values are identified as outliers. Recall that all of the techniques within this category can deal with streaming time series.

与估计模型相反，基于预测模型的技术将模型拟合到时间序列并仅使用过去的数据获得 ˆxt； 也就是说，不使用当前点 xt 或任何后验观察。 与其预测值非常不同的点被识别为异常值。 回想一下，该类别中的所有技术都可以处理流式时间序列。

Within the prediction-based methods, some use a fixed model and thus are not able to adapt to the changes that occur in the data over time. For example, the DeepAnT outlier detection approach presented by Munir et al. [2019] applies a fixed Convolutional Neural Networks (CNNs) to predict values in the future. Other methods use an autoregressive model [Hill and Minsker 2010] or an ARIMA model [Zhang et al. 2012], which obtain confidence intervals for the predictions instead of only point estimates. Consequently, these methods implicitly define the value of τ .

在基于预测的方法中，有些方法使用固定模型，因此无法适应数据随时间发生的变化。 例如，Munir 等人提出的 DeepAnT 异常值检测方法。 [2019] 应用固定的卷积神经网络 (CNN) 来预测未来的值。 其他方法使用自回归模型 [Hill and Minsker 2010] 或 ARIMA 模型 [Zhang 等人。 2012]，获得预测的置信区间，而不仅仅是点估计。 因此，这些方法隐含地定义了 τ 的值。

Other techniques adapt to the evolution of the time series by retraining the model. As the most basic approach, Basu and Meckesheimer [2007] describe a method that predicts the value ˆ xt with the median of its past data. More elaborately, Zhou et al. [2018a] fit an ARIMA model within a sliding window to compute the prediction interval, so the parameters are refitted each time that the window moves a step forward.

在基于预测的方法中，有些方法使用固定模型，因此无法适应数据随时间发生的变化。 例如，Munir 等人提出的 DeepAnT 异常值检测方法。 [2019] 应用固定的卷积神经网络 (CNN) 来预测未来的值。 其他方法使用自回归模型 [Hill and Minsker 2010] 或 ARIMA 模型 [Zhang 等人。 2012]，获得预测的置信区间，而不仅仅是点估计。 因此，这些方法隐含地定义了 τ 的值。

Extreme value theory has also been employed to detect point outliers in streaming univariate series, using past data and retraining. Given a fixed risk q, Siffer et al. [2017] use this theory to obtain a threshold value zq,t that adapts itself to the evolution of the data such that P (Xt > zq,t ) < q, for any t ≥ 0, assuming that the extreme values follow a Generalized Pareto Distribution. Incoming data are used to both detect anomalies (Xt > zq,t ) and refine zq,t . In particular, the authors propose two algorithms: SPOT, for data following any stationary distribution; and DSPOT, for data that can be subject to concept drift [Tsymbal 2004; Gama et al. 2014].

极值理论也被用来检测流式单变量序列中的点异常值，使用过去的数据和重新训练。 给定一个固定的风险 q，Siffer 等人。 [2017] 使用该理论获得阈值 zq,t，该阈值适应数据的演变，使得 P (Xt > zq,t ) < q，对于任何 t ≥ 0，假设极值遵循广义 帕累托分布。 传入数据用于检测异常 (Xt > zq,t ) 和细化 zq,t 。 特别地，作者提出了两种算法：SPOT，用于服从任何平稳分布的数据； 和 DSPOT，用于可能受概念漂移影响的数据 [Tsymbal 2004; 伽马等人。 2014]。

Some of these prediction-based methods retrain the underlying model periodically, or each time a new point arrives. Therefore, they can adapt to the evolution of the data. However, none of them applies incremental model learning approaches, where the model is not rebuilt from scratch each time but is updated incrementally using only the new information received. This avoids the cost associated with training the models more than once and permits a more gradual adaptation to changes that can occur in the data, which is of special interest in streaming contexts [Losing et al. 2018]. In this sense, and in contrast to the previous approaches, Xu et al. [2016, 2017] suggest modeling a univariate time series stream in an incremental fashion. This method uses Student-t processes to compute the prediction interval and updates the covariance matrix with the newly arrived data point. Ahmad et al. [2017] use the Hierarchical Temporal Memory (HTM) network, which is also a prediction model-based technique that updates incrementally as new observations arrive.

其中一些基于预测的方法会定期或每次新点到达时重新训练基础模型。因此，它们可以适应数据的演变。然而，它们都没有应用增量模型学习方法，其中模型不是每次都从头开始重建，而是仅使用收到的新信息进行增量更新。这避免了与多次训练模型相关的成本，并允许更渐进地适应数据中可能发生的变化，这在流上下文中特别有趣 [Losing et al. 2018]。从这个意义上说，与以前的方法相比，Xu 等人。 [2016, 2017] 建议以增量方式对单变量时间序列流进行建模。此方法使用 Student-t 过程来计算预测区间并使用新到达的数据点更新协方差矩阵。艾哈迈德等人。 [2017] 使用分层时间记忆 (HTM) 网络，这也是一种基于预测模型的技术，随着新观察的到来而增量更新。

The techniques mentioned so far are based on Equation (1). However, not all the existing point outlier detection methods rely on that idea, such as the density-based methods, which belong to the second category depicted in Figure 7. Techniques within this group consider that points with less than τ neighbors are outliers; i.e., when less than τ objects lie within distance R from those points. This could be denoted as xt is an outlier ⇐⇒ |{x ∈ X |d(x, xt ) ≤ R}| < τ , (2) where d is most commonly the Euclidean distance, xt is the data point at time stamp t to be analyzed, X is the set of data points, and R ∈ R+.

到目前为止提到的技术基于等式（1）。 然而，并非所有现有的点异常值检测方法都依赖于这个想法，例如基于密度的方法，属于图 7 中描述的第二类。该组中的技术认为具有少于 τ 个邻居的点是异常值； 即，当少于 τ 个物体位于距离这些点的距离 R 内时。 这可以表示为 xt 是一个异常值 ⇐⇒ |{x ∈ X |d(x, xt ) ≤ R}| < τ , (2) 其中 d 是最常见的欧氏距离，xt 是要分析的时间戳 t 处的数据点，X 是数据点的集合，R ∈ R+。

The detection of density-based outliers has been widely handled in non-temporal data, but the concept of neighborhood is more complex in time series, because the data are ordered. To take temporality into account, Angiulli and Fassetti [2007, 2010] and Ishimtsev et al. [2017] apply this method within a sliding window, which allows us to determine whether or not a new value of a streaming time series is an outlier upon arrival. An illustration of density-based outliers is provided in Figure 9 at two different time steps with R = 0.5, τ = 3, and a sliding window of length 11. When using sliding windows, a point can be an outlier for a window (e.g., O13 at t = 13) but not for another (e.g., I13 at t = 17). However, if a data point has at least τ succeeding neighbors within a window, then it cannot be an outlier for any future evolution (e.g., S4 at t = 13).

基于密度的异常值检测在非时间数据中得到了广泛的处理，但邻域的概念在时间序列中更为复杂，因为数据是有序的。 为了考虑时间性，Angiulli 和 Fassetti [2007, 2010] 以及 Ishimtsev 等人。 [2017] 在滑动窗口中应用此方法，这使我们能够确定流时间序列的新值在到达时是否为异常值。 图 9 中提供了在两个不同时间步长 R = 0.5、τ = 3 和长度为 11 的滑动窗口时基于密度的异常值的说明。使用滑动窗口时，一个点可以是窗口的异常值（例如 , O13 在 t = 13) 但不是另一个（例如，I13 在 t = 17）。 然而，如果一个数据点在一个窗口内至少有 τ 个后继邻居，那么它就不能成为任何未来进化的异常值（例如，t = 13 时的 S4）。

Histogramming is the last group analyzed in this section. This type of method is based on detecting the points whose removal from the univariate time series results in a histogram representation with lower error than the original, even after the number of buckets has been reduced to account for the separate storage of these points (see Figure 10). The histogram is built by computing the average of the values within each bucket, in which the order of the observations is preserved. Then, given a sequence of points X and a number of buckets B, D ⊂ X is a deviant set if EX (H ∗ B ) > EX−D (H ∗ B−|D| ), (3) where H∗ B is the optimal histogram (histogram with lowest approximation error) on X with B buckets, EX () is the total error in the approximation and H∗ B−|D| is the optimal histogram on X − D with B − |D| buckets. Jagadish et al. [1999] introduced the term deviant to refer to these point outliers. They proposed a dynamic programming mechanism to produce a histogram consisting of B − |D| buckets and |D| deviants, minimizing its total error. Some years later Muthukrishnan et al. [2004] observed that for any bucket, the optimal set of k = |D| deviants always consists of the l highest and remaining k − l lowest values within the bucket, for some l ≤ k. Moreover, they presented not only an optimal algorithm for non-streaming time series but also a closely approximate algorithm and a heuristic approach for the streaming case.

直方图是本节分析的最后一组。这种类型的方法是基于检测从单变量时间序列中删除的点会导致直方图表示的误差比原始的低，即使在减少桶的数量以考虑这些点的单独存储之后（见图10）。直方图是通过计算每个桶中值的平均值来构建的，其中保留了观察的顺序。然后，给定一个点序列 X 和多个桶 B，如果 EX (H ∗ B ) > EX−D (H ∗ B−|D| ), (3) 其中 H∗ B是具有 B 个桶的 X 上的最优直方图（具有最低近似误差的直方图），EX () 是近似中的总误差，H∗ B−|D|是 X − D 上的最优直方图，其中 B − |D|桶。贾加迪什等人。 [1999] 引入了术语“异常”来指代这些点异常值。他们提出了一种动态规划机制来生成由 B − |D| 组成的直方图。桶和 |D|偏差，最小化其总误差。几年后 Muthukrishnan 等人。 [2004] 观察到，对于任何桶，最佳集 k = |D|对于某些 l ≤ k，异常值总是由桶中的 l 个最高值和剩余的 k − l 个最低值组成。此外，他们不仅提出了非流式时间序列的最佳算法，而且还提出了一种近似算法和一种适用于流式情况的启发式方法。

To conclude, the techniques that detect point outliers in univariate time series can be grouped mainly in three categories based on the intuition they have of the concept of outlier, and basically what differentiates one technique from another are the characteristics gathered in Table 2. In particular, we consider that a method is iterative if it is repeatedly applied on the same set to find the outliers. Concerning the parametricity of the methods, we consider that parametric methods assume that the underlying distribution of the phenomenon under analysis belongs to a parametric family, and estimate its parameters (a fixed number) from the given data. Contrarily, in non-parametric techniques, the model or the family of distributions is not defined a priori but instead it is determined from the given data and has a flexible number of parameters. Also, we refer to semi-parametric methods as those that combine both parametric and non-parametric approaches.

总之，单变量时间序列中检测点异常值的技术可以根据它们对异常值概念的直觉主要分为三类，基本上区分一种技术的是表2中收集的特征。特别是 ，我们认为如果一个方法在同一集合上重复应用以找到异常值，则该方法是迭代的。 关于方法的参数化，我们认为参数化方法假设被分析现象的潜在分布属于参数族，并从给定数据估计其参数（固定数）。 相反，在非参数技术中，模型或分布族不是先验定义的，而是根据给定数据确定的，并且具有灵活数量的参数。 此外，我们将半参数方法称为结合参数和非参数方法的方法。

In general, the authors use the term outlier, and the described techniques consider temporality and can be applied in a streaming context. Also, the few iterative methods are related to detecting unwanted data and improving the quality of the time series. Most of the model-based techniques are parametric or semi-parametric. Semi-parametric techniques usually assume a distribution over the residuals when defining a threshold value, even if the residuals are obtained with a non-parametric approach.

一般而言，作者使用术语异常值，并且所描述的技术考虑了时间性并且可以应用于流上下文。 此外，少数迭代方法与检测不需要的数据和提高时间序列的质量有关。 大多数基于模型的技术都是参数化或半参数化的。 半参数技术通常在定义阈值时假设残差分布，即使残差是通过非参数方法获得的。

Finally, caution must be taken with the estimation methods that can theoretically be applied in
a streaming time series; that is, those that do not use subsequent observations to the last arrived
data point xt (k2 = 0 in Table 1). Although, it may in theory be possible to apply these techniques
in streaming contexts, these methods use the last observation received (xt ) and some other past
information to calculate its expected value ( ˆ xt ) and they then decide whether or not it is an outlier.
Consequently, they must perform some calculations after the new point has arrived. The cost of
this computation depends on the complexity of each method (which has not been analyzed in this
article or in other original works) but may not always guarantee a fast enough response. Thus,
in practice, some of these techniques may not be applicable in streaming contexts and prediction
methods are more recommendable for these situations.

最后，必须谨慎对待理论上可以应用于流时间序列的估计方法； 也就是说，那些不使用对最后到达的数据点 xt（表 1 中的 k2 = 0）进行后续观察的那些。 尽管理论上可以将这些技术应用于流上下文，但这些方法使用接收到的最后一个观察值 (xt ) 和一些其他过去的信息来计算其期望值 ( ˆ xt )，然后他们决定它是否是一个 离群值。 因此，他们必须在新点到达后执行一些计算。 此计算的成本取决于每种方法的复杂性（本文或其他原创作品中未对此进行分析），但可能无法始终保证足够快的响应。 因此，在实践中，这些技术中的一些可能不适用于流上下文，并且对于这些情况更推荐预测方法。

## 4 SUBSEQUENCE OUTLIERS

### 4.1 Univariate Time Series

### 4.2 Multivariate Time Series

## 5 OUTLIER TIME SERIES

## 6 PUBLICLY AVAILABLE SOFTWARE

## 7 CONCLUDING REMARKS AND FUTURE WORK

In this article, an organized overview of outlier detection techniques in time series data has been proposed.Moreover, a taxonomy that categorizes these methods depending on the input data type, the outlier type, and the nature of the detection method has been included. This section first discusses some general remarks about the analyzed techniques, and it then introduces the conclusions regarding the axes of the taxonomy.

在本文中，提出了对时间序列数据中的异常值检测技术的有组织的概述。 本节首先讨论对所分析技术的一些一般性评论，然后介绍有关分类轴的结论。

As seen in previous sections, a broad terminology has been used to refer to the same concept: the outlier in unlabeled time series data. These terms are usually related to the objective of the detection such that outlier is mostly used when detecting unwanted data, whereas anomaly has been used when detecting events of interest. In most of the analyzed works, the concept outlier represents an event of interest; that is, the authors mainly focus on extracting the outlier information considered as useful data rather than on cleaning the useless or unwanted data to improve the data quality for further analysis. Thus, it might be interesting to extend this type of methods by developing techniques that improve the data quality, mainly of multivariate time series data.

如前几节所示，一个广泛的术语被用来指代相同的概念：未标记时间序列数据中的异常值。 这些术语通常与检测目标有关，因此异常值主要用于检测不需要的数据，而异常值则用于检测感兴趣的事件。 在大多数分析的作品中，概念异常值代表感兴趣的事件； 也就是说，作者主要关注提取被认为是有用数据的异常信息，而不是清理无用或不需要的数据以提高数据质量以供进一步分析。 因此，通过开发提高数据质量（主要是多元时间序列数据）的技术来扩展这种类型的方法可能会很有趣。

Despite the variety in terminology and purpose, all of the methods that we have reviewed are based on the same idea: detecting those parts in a time series (point, subsequence, or whole time series) that significantly differ from their expected value. Each author uses different means to obtain this expected value and compute how far it is from the actual observation to decide whether or not it is an outlier. Although some techniques obtain the expected value based on an external or reference set, caution must be taken, because it can itself contain outliers and distort the detection. In fact, they are in the limit of the unsupervised framework, because even if the time series has no labels, it is usually assumed that all the external or reference data are non-outliers.

尽管术语和目的各不相同，但我们回顾的所有方法都基于相同的想法：检测时间序列（点、子序列或整个时间序列）中与其预期值显着不同的部分。 每个作者使用不同的方法来获得这个期望值并计算它与实际观察的距离来决定它是否是异常值。 尽管某些技术基于外部或参考集获得预期值，但必须谨慎，因为它本身可能包含异常值并扭曲检测。 事实上，它们处于无监督框架的极限，因为即使时间序列没有标签，通常也假设所有外部或参考数据都是非异常值。

Once the expected value is obtained, a threshold is often needed to decide whether or not we have found an outlier. Given that the results directly vary depending on that selection and few techniques give an automatic way to determine the threshold [Siffer et al. 2017; Lu et al. 2018; Hundman et al. 2018; Su et al. 2019], an interesting future line of research would be to deepen on the dynamic and adaptive selection of thresholds in both univariate and multivariate time series. Indeed, to the best of our knowledge, there are no methods that include this type of threshold in the subsequence and entire time series outlier analysis.

一旦获得了期望值，通常需要一个阈值来决定我们是否发现了异常值。 鉴于结果直接根据选择而变化，并且很少有技术提供自动确定阈值的方法 [Siffer et al. 2017; 卢等人。 2018 年； 亨德曼等人。 2018 年； 苏等人。 2019]，未来一个有趣的研究方向将是深化单变量和多变量时间序列中阈值的动态和自适应选择。 事实上，据我们所知，没有任何方法在子序列和整个时间序列异常值分析中包含这种类型的阈值。

As a final general remark and before proceeding with the conclusions regarding the axes of the taxonomy, the time elapsed from one observation to the subsequent is also an important aspect to consider. The vast majority of methods assume that the time series are regularly sampled. However, real life often does not provide this type of data, and converting it into such type is not always the best option. Therefore, outlier detection in an irregularly sampled time series is an interesting future direction line.

作为最后的一般性评论，在得出关于分类轴的结论之前，从一次观察到下一次观察所经过的时间也是需要考虑的一个重要方面。 绝大多数方法都假设时间序列是定期采样的。 但是，现实生活中往往不提供这种类型的数据，将其转换为这种类型并不总是最好的选择。 因此，不规则采样的时间序列中的异常值检测是一个有趣的未来方向线。

Having provided some general conclusions, we will now focus on each of the axes. Starting from the first axis, the most remarkable conclusion is that even if most of the analysis has been performed on univariate input time series data, in recent years special emphasis has been placed on multivariate time series.

在提供了一些一般性结论之后，我们现在将关注每个轴。 从第一个轴开始，最显着的结论是，即使大部分分析都是在单变量输入时间序列数据上进行的，但近年来特别强调了多变量时间序列。

For the second axis, point outlier detection is the most researched problem due to its simplicity in comparison to the rest. Within this category, it is remarkable that some techniques do not consider the temporal information at all. This can lead to not detecting outliers that violate the temporal correlation of the series. Thus, possible future work may include temporal information to techniques that do not consider it (e.g., Cheng et al. [2008, 2009] and Siffer et al. [2017]). Additionally, even if theoretically many techniques can determine if a new data point is an outlier upon arrival, no study has been conducted to analyze whether these methods can really give an immediate response in real time or not. Consequently, an in-depth investigation could be done to analyze the computational cost of outlier detection techniques and to determine whether these methods can be practically used in real-time scenarios. There is also a chance for further incremental algorithm developments to ensure quick responses that adapt to the evolution of the stream.

对于第二个轴，点异常值检测是研究最多的问题，因为与其他轴相比，它很简单。在这一类别中，值得注意的是一些技术根本不考虑时间信息。这可能导致无法检测到违反序列时间相关性的异常值。因此，未来可能的工作可能包括不考虑它的技术的时间信息（例如，Cheng et al. [2008, 2009] 和 Siffer et al. [2017]）。此外，即使理论上许多技术可以在到达时确定新数据点是否为异常值，但尚未进行任何研究来分析这些方法是否真的能够实时给出即时响应。因此，可以进行深入调查以分析异常值检测技术的计算成本，并确定这些方法是否可以在实时场景中实际使用。还有机会进行进一步的增量算法开发，以确保快速响应以适应流的演变。

Subsequence outliers and outlier time series have been handled less frequently. Most of the subsequence outlier detection methods find non-periodic and fixed-length outliers. Indeed, there are no techniques that identify periodic subsequence outliers in multivariate time series. This can be a promising area for further investigation, especially in fields such as cybersecurity to detect periodic network attacks, or in credit-fraud detection to detect periodic thefts. Also, within techniques that detect subsequence outliers, care must be taken with the way in which clustering is performed, because it has been shown that clustering all of the subsequences extracted from a time series by a sliding window produces meaningless results [Keogh and Lin 2005].

后续异常值和异常值时间序列的处理频率较低。 大多数子序列异常值检测方法发现非周期性和固定长度的异常值。 事实上，没有技术可以识别多元时间序列中的周期性子序列异常值。 这可能是进一步调查的一个有希望的领域，尤其是在网络安全等领域，以检测定期网络攻击，或在信用欺诈检测中检测定期盗窃。 此外，在检测子序列异常值的技术中，必须小心执行聚类的方式，因为已经表明，通过滑动窗口对从时间序列中提取的所有子序列进行聚类会产生无意义的结果 [Keogh and Lin 2005 ]。

Not much work has been carried out on the detection of outlier time series. Other research directions in this line include using different distance measures and creating more effective methods for dealing with time-dependent variables of different lengths.

离群时间序列的检测还没有进行太多的工作。 这方面的其他研究方向包括使用不同的距离度量和创建更有效的方法来处理不同长度的时间相关变量。

Within the dissimilarity-based techniques that detect either subsequence or whole time series outliers, the dissimilarity measure that is used influences the results obtained. The Euclidean distance accounts for the majority of all published work mentioned in this review due to its computation efficiency. However, other measures, such as DTW, could lead to an improvement in the detection of outliers, because they include temporal information. An interesting research direction would be to observe how different dissimilarity measures influence the outlier detection algorithms in time series data to see if any of them improve the results of the Euclidean distance. In particular, meta-learning approaches such as that proposed by Mori et al. [2016] could be used as they provide an automatic selection of the most suitable distance measure.

在检测子序列或整个时间序列异常值的基于相异性的技术中，所使用的相异性度量会影响获得的结果。 由于其计算效率，欧几里得距离占本评论中提到的所有已发表工作的大部分。 但是，其他措施（例如 DTW）可能会导致异常值检测的改进，因为它们包含时间信息。 一个有趣的研究方向是观察不同的相异性度量如何影响时间序列数据中的异常值检测算法，以查看它们中的任何一个是否改进了欧几里德距离的结果。 特别是，Mori 等人提出的元学习方法。 [2016] 可以使用，因为它们提供了最合适的距离度量的自动选择。

In addition to these types of outliers, there could be other types of unexplored outliers. For example, it may be interesting to detect outliers that propagate over time within different variables of a multivariate time series; that is, an outlier may begin in a unique variable and then propagate through other variables in later time steps. As far as we know, this problem has not been addressed yet in the literature, or at least it has not been done under the name of outlier/anomaly detection.

除了这些类型的异常值之外，可能还有其他类型的未探索的异常值。 例如，检测在多元时间序列的不同变量内随时间传播的异常值可能很有趣； 也就是说，异常值可能从一个唯一的变量开始，然后在以后的时间步长中通过其他变量传播。 据我们所知，这个问题在文献中还没有解决，或者至少没有以异常值/异常检测的名义进行。

Finally, with regard to the nature of the detection method, it should be noted that some univariate techniques (e.g., the density-based) can easily be generalized to the multivariate case by considering the distance between vectors instead of points. However, complex correlations between the variables in a multivariate time series are not taken into account. This may lead us to not identify observations that look normal in each variable individually but that violate the correlation structure between variables. In addition, when applying a univariate technique separately to each variable in a multivariate time series, the correlation dependencies are ignored. This can be computationally expensive when the number of variables is large. Hence, an extension of the univariate detection techniques applied to multivariate time series should be studied (e.g., Xu et al. [2017] and Hundman et al. [2018]) so that the correlations between variables representing complex system behaviors are included.

最后，关于检测方法的性质，应该注意的是，通过考虑向量而不是点之间的距离，一些单变量技术（例如，基于密度的）可以很容易地推广到多变量情况。但是，没有考虑多元时间序列中变量之间的复杂相关性。这可能导致我们无法识别在每个变量中看起来正常但违反变量之间相关结构的观察。此外，当将单变量技术分别应用于多变量时间序列中的每个变量时，相关依赖关系将被忽略。当变量数量很大时，这在计算上可能很昂贵。因此，应研究应用于多变量时间序列的单变量检测技术的扩展（例如，Xu et al. [2017] 和 Hundman et al. [2018]），以便包括代表复杂系统行为的变量之间的相关性。
